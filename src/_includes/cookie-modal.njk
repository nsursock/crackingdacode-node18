<!-- This example requires Tailwind CSS v2.0+ -->
<div
    x-cloak="x-cloak"
    x-show="open && document.referrer === ''"
    class="relative z-[100]"
    aria-labelledby="modal-title"
    role="dialog"
    aria-modal="true">
    <!-- Background backdrop, show/hide based on modal state.
    
    Entering: "ease-out duration-300"
        From: "opacity-0"
        To: "opacity-100"
    Leaving: "ease-in duration-200"
        From: "opacity-100"
        To: "opacity-0" -->
    <div
        x-show="open && document.referrer === ''"
        x-transition:enter=" ease-out duration-300 "
        x-transition:enter-start="opacity-0 "
        x-transition:enter-end="opacity-100  "
        x-transition:leave=" ease-in duration-200 "
        x-transition:leave-start="opacity-100 "
        x-transition:leave-end="opacity-0 "
        class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
    <div class="fixed z-10 inset-0 overflow-y-auto">
        <div
            class="flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0">
            <!-- Modal panel, show/hide based on modal state.
            
            Entering: "ease-out duration-300"
                From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
                To: "opacity-100 translate-y-0 sm:scale-100"
            Leaving: "ease-in duration-200"
                From: "opacity-100 translate-y-0 sm:scale-100"
                To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95" -->
            <div
                class="relative bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8
                    sm:max-w-lg sm:w-full sm:p-6 dark:bg-gray-900"
                x-show="open && document.referrer === ''"
                x-transition:enter=" ease-out duration-300 "
                x-transition:enter-start="opacity-0 translate-y-4 md:translate-y-0 md:scale-95 "
                x-transition:enter-end="opacity-100 translate-y-0 md:scale-100  "
                x-transition:leave=" ease-in duration-200 "
                x-transition:leave-start="opacity-100 translate-y-0 md:scale-100 "
                x-transition:leave-end="opacity-0 translate-y-4 md:translate-y-0 md:scale-95">
                <div>
                    <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100">
                        <svg
                            class="h-6 w-6 text-green-600 fill-current"
                            enable-background="new 0 0 512 512"
                            viewBox="0 0 512 512"
                            xmlns="http://www.w3.org/2000/svg"><path d="m497.1 286.7c-3.4-4.6-8.5-7.6-14.1-8.3-73.7-9.1-129.2-71.4-129.2-145.1 0-24.7 6.4-49.2 18.5-70.8 2.8-4.9 3.3-10.8
                                1.6-16.2s-5.7-9.8-10.8-12.2c-33.1-15.3-68.4-23.1-105-23.1-136.2 0-247 109.9-247 245s110.8 245 247.1 245c118.2 0
                                220.2-83.5 242.6-198.5 1-5.5-.3-11.2-3.7-15.8zm-239 173.5c-113.5 0-205.9-91.6-205.9-204.2s92.4-204.2 205.9-204.2c23.5 0
                                46.4 3.9 68.2 11.5-9 22.2-13.7 46-13.7 70 0 86.5 59.9 160.8 142.7 181.4-25.7 85.4-105.6 145.5-197.2 145.5z"/><ellipse cx="194.5" cy="150.8" rx="20.4" ry="20.3"/><ellipse cx="264.4" cy="230.7" rx="20.4" ry="20.3"/><ellipse cx="293.8" cy="340.2" rx="20.4" ry="20.3"/><ellipse cx="146.7" cy="304.3" rx="20.4" ry="20.3"/>
                        </svg>
                    </div>
                    <div class="mt-3 text-center sm:mt-5">
                        <h3 class="text-lg leading-6 font-medium text-gray-900 dark:text-gray-100" id="consent-modal-title">Data Consent</h3>
                        <div class="mt-2">
                            <p class="text-sm text-gray-500 dark:text-gray-400">We store data in a range of ways to improve your experience on our
                                website, including: keeping you signed in and understanding how you use our website.</p>
                        </div>
                    </div>
                </div>
                <div class="mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense" x-data="dataConsent()">
                    <div class="mt-1 text-center sm:mt-3 relative">
                        <div class=" absolute  -inset-0.5 bg-indigo-600 dark:bg-indigo-600 rounded-md blur"></div>
                        <button
                        @click="open = !open; registerEvent('accept', 'click')"
                        type="button"
                        class="relative w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4
                            py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2
                            focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm">
                        Accept</button>
                    </div>
                    <div class="sm:ml-2 text-center sm:mt-3 relative">
                        <div class=" absolute  -inset-0.5 bg-gray-300 dark:bg-gray-700 rounded-md blur"></div>
                        <button
                        @click="open = !open; removeData(); registerEvent('decline', 'click')"
                        type="button"
                        class="relative mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm
                            px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2
                            focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm dark:bg-gray-800 dark:border-gray-700
                            dark:text-gray-400 dark:hover:bg-gray-700">
                        Decline</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    function dataConsent() {
        return {
            removeData() {
                // document.cookie = "crdacode_NewUser=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"; document.cookie =
                // "crdacode_ReturningUser=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                localStorage.removeItem('crdacode_NewUser');
                localStorage.removeItem('crdacode_ReturningUser');
                localStorage.removeItem('crdacode_token');
                localStorage.removeItem('crdacode_theme');
                Alpine
                    .store('auth')
                    .setUser(null)
            }
        }
    }
</script>